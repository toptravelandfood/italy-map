<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Italy For All – Pro Accessible Travel Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
<style>
body { margin:0; font-family: Arial, sans-serif; background: #f5f5f5; }
header { background: #003366; color: white; padding: 15px; text-align: center; font-size: 1.5rem; font-weight: bold; }
#filters { padding: 15px; background: white; display: flex; flex-wrap: wrap; gap: 10px; border-bottom: 1px solid #ddd; justify-content: center; }
#filters label { display: flex; align-items: center; gap: 5px; font-size: 0.95rem; }
#filters .reset-btn { background: #003366; color: white; padding: 5px 12px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px; }
#map { width: 100%; height: 70vh; }
.location-list { padding: 15px; background: white; max-height: 300px; overflow-y: auto; border-top: 1px solid #ddd; }
.location-item { padding: 10px 0; border-bottom: 1px solid #ddd; cursor: pointer; }
.location-item:hover { background-color: #f0f0f0; }
.popup-img { width: 100%; max-width: 200px; border-radius: 5px; margin-bottom: 5px; }
</style>
</head>
<body>
<header>Italy For All – Pro Accessible Travel Map</header>

<section id="filters">
<!-- Accessibility Filters -->
<label><input type="checkbox" class="filter-access" value="wheelchair"> Wheelchair</label>
<label><input type="checkbox" class="filter-access" value="braille"> Braille</label>
<label><input type="checkbox" class="filter-access" value="blind"> Blind-Friendly</label>
<label><input type="checkbox" class="filter-access" value="senior"> Senior-Friendly</label>
<label><input type="checkbox" class="filter-access" value="low-mobility"> Low Mobility</label>

<!-- Type Filters -->
<label><input type="checkbox" class="filter-type" value="monument"> Monument</label>
<label><input type="checkbox" class="filter-type" value="restaurant"> Restaurant</label>
<label><input type="checkbox" class="filter-type" value="event"> Event</label>

<!-- Tag Filters -->
<label><input type="checkbox" class="filter-tag" value="vegan"> Vegan-Friendly</label>

<button class="reset-btn" id="resetFilters">Reset Filters</button>
</section>

<div id="map"></div>
<div class="location-list" id="locationList"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<script>
// Initialize Map
var map = L.map('map').setView([41.9028, 12.4964], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

// Sample Locations
const locations = [
  {
    name: "Colosseum",
    coords: [41.8902, 12.4922],
    accessibility: ["wheelchair", "senior"],
    type: "monument",
    city: "Rome",
    address: "Piazza del Colosseo, 1",
    hours: "08:30–19:00",
    price: "16€",
    tags: ["vegan"],
    img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/320px-Colosseo_2020.jpg"
  },
  {
    name: "Turin Egyptian Museum",
    coords: [45.0686, 7.6845],
    accessibility: ["wheelchair", "braille", "blind"],
    type: "monument",
    city: "Turin",
    address: "Via Accademia delle Scienze, 6",
    hours: "09:00–18:30",
    price: "15€",
    tags: [],
    img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/Museo_Egizio_Torino_01.jpg/320px-Museo_Egizio_Torino_01.jpg"
  },
  {
    name: "Florence Cathedral",
    coords: [43.7731, 11.2556],
    accessibility: ["low-mobility", "senior"],
    type: "monument",
    city: "Florence",
    address: "Piazza del Duomo, 50122",
    hours: "10:00–17:00",
    price: "Free entry",
    tags: ["vegan"],
    img: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cattedrale_di_Santa_Maria_del_Fiore.jpg/320px-Cattedrale_di_Santa_Maria_del_Fiore.jpg"
  },
  {
    name: "Venice Vaporetto Line 1",
    coords: [45.4408, 12.3155],
    accessibility: ["wheelchair"],
    type: "event",
    city: "Venice",
    address: "Canal Grande",
    hours: "All day",
    price: "7.50€ per ride",
    tags: [],
    img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Vaporetto_Venice.jpg/320px-Vaporetto_Venice.jpg"
  }
];

// Marker Cluster
var markers = L.markerClusterGroup();
var mapMarkers = [];

// Icon by type
function getIcon(type) {
  let iconUrl = "";
  if(type==="monument") iconUrl="https://cdn-icons-png.flaticon.com/512/684/684908.png";
  if(type==="restaurant") iconUrl="https://cdn-icons-png.flaticon.com/512/3075/3075977.png";
  if(type==="event") iconUrl="https://cdn-icons-png.flaticon.com/512/854/854878.png";
  return L.icon({ iconUrl, iconSize:[30,30], iconAnchor:[15,30], popupAnchor:[0,-30] });
}

// Render Map
function renderMap() {
  markers.clearLayers();
  const listContainer = document.getElementById('locationList');
  listContainer.innerHTML = '';

  const activeAccess = [...document.querySelectorAll(".filter-access:checked")].map(e=>e.value);
  const activeType = [...document.querySelectorAll(".filter-type:checked")].map(e=>e.value);
  const activeTag = [...document.querySelectorAll(".filter-tag:checked")].map(e=>e.value);

  locations.forEach(loc=>{
    if(activeAccess.length>0 && !activeAccess.every(f=>loc.accessibility.includes(f))) return;
    if(activeType.length>0 && !activeType.includes(loc.type)) return;
    if(activeTag.length>0 && !activeTag.every(f=>loc.tags.includes(f))) return;

    const popupHTML = `
      <div style="text-align:center;">
        <img src="${loc.img}" class="popup-img" alt="${loc.name}">
        <h3>${loc.name}</h3>
        <p><b>Type:</b> ${loc.type.charAt(0).toUpperCase()+loc.type.slice(1)}</p>
        <p><b>City:</b> ${loc.city}</p>
        <p><b>Address:</b> ${loc.address}</p>
        <p><b>Hours:</b> ${loc.hours}</p>
        <p><b>Price:</b> ${loc.price}</p>
        <p><b>Accessibility:</b> ${loc.accessibility.join(", ")}</p>
        <p><b>Tags:</b> ${loc.tags.join(", ")}</p>
      </div>
    `;

    const marker = L.marker(loc.coords,{icon:getIcon(loc.type)}).bindPopup(popupHTML);
    markers.addLayer(marker);

    const item = document.createElement('div');
    item.className='location-item';
    item.innerHTML=`<b>${loc.name}</b> – ${loc.city} (${loc.type})`;
    item.addEventListener('click', ()=>{
      map.setView(loc.coords,15);
      marker.openPopup();
    });
    item.addEventListener('mouseenter', ()=>marker.openPopup());
    item.addEventListener('mouseleave', ()=>marker.closePopup());
    listContainer.appendChild(item);
  });

  map.addLayer(markers);
}

// Event Listeners
document.querySelectorAll(".filter-access, .filter-type, .filter-tag").forEach(f=>f.addEventListener("change", renderMap));
document.getElementById("resetFilters").addEventListener("click", ()=>{
  document.querySelectorAll(".filter-access, .filter-type, .filter-tag").forEach(f=>f.checked=false);
  renderMap();
});

// Initial render
renderMap();
</script>
</body>
</html>
